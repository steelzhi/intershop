<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Заказы</title>
</head>

<body>
<a href="/cart/items" style="float:right;">
    <b>Корзина</b>
</a>
<br/>
<a href="/main/items" style="float:right;">
    <b>На главную</b>
</a>
<table th:each="order : ${orders}" style="width:70%;margin-left:auto;margin-right:auto;">
    <h2>
        <a th:text="${'Заказ № '+order.getId()}" th:href="${'/orders/'+order.getId()}"></a>
    </h2>
    <table th:each="orderItem : ${order.getOrderItems()}" style="width:70%;margin-left:auto;margin-right:auto;">
        <td>
            <a th:href="${'/items/'+orderItem.getItemDto().getId()}">
                <img th:src="@{/{itemDtoId}/image(itemDtoId=${orderItem.getItemDto().id})}" width="300" height="300">
            </a>
        </td>
        <td th:text="${orderItem.getItemDto().getName()+' ('+orderItem.getItemAmount()+' шт.) '+(orderItem.getItemDto().getPrice()*orderItem.getItemAmount())+' ₽'}"></td>
    </table>
        <p>
            <b th:text="${'Сумма заказа: '+ order.totalSum} +' ₽'"></b>
        </p>
</table>
<br/>
<p>
    <b th:text="'Общая сумма всех сделанных заказов - ' + ${sumOfAllOrders} + ' ₽'"></b>
</p>
</body>

</html>