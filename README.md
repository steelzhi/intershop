Артур, привет!


- В задании указано, что нужно написать OpenApi интеграции основного сервиса и сервиса платежей. Но OpenApi
создается для @RestController, а у меня в основном приложении запрос к сервису платежей происходит в @Controller
  (CartController и OrderController). Функционал запроса к сервису платежей можно было бы вынести в отдельно
созданный @RestController основного приложения, но мне кажется это не оптимальным - в таком случае бы пришлось на этапах 
формирования "Корзины" и совершения заказа сперва
обращаться из контроллеров основного сервиса (которые просто @Controller) в этот @RestController, а затем
из созданного @RestController делать запросы из основного сервиса в сервис платежей. Поэтому я оставил функционал
обращения в сервис платежей внутри уже созданных @Controller основного приложения, OpenApi подготовил для сервиса платежей.
- 

# intershop

Инструкция по работе с приложением:
- Запустить Docker. В нем запустить Redis Server командой:
  docker run --name redis-server -it --rm -p 6379:6379 redis:7.4.2-bookworm sh -c "redis-server && sleep 7 && redis-cli"

1. Запустить приложение:

    1.1. Локально:
2. 
        1.1.1 Запустить MainServiceApplication#main (запустится основной сервис на порте 8080).
         - Запустить PaymentServiceApplication#main (запустится сервис платежей на порте 9090).
    либо:

    1.2. В Docker-контейнере:

        1.2.1. Собрать проект командой "gradle clean build"
        1.2.2. Запустить Docker.
        1.2.3. В терминале IDE выполнить команду "docker compose up".
2. Перейти в браузере по адресам: 
 http://localhost:8080/main/items (адрес интернет-магазина)
   http://localhost:9090/payments/balance (просмотр созданного текущего баланса)
Приложение готово к работе.

Примечания:
- Внизу главной странице есть кнопка для добавления новых товаров.
- Для удобства проверки задания реализована пагинация в формате "2 товара на странице" List).



Добавить в инструкцию:
1. Запустить приложение Docker.
2. Запустить Redis Server командной в терминале IDE: 
docker run --name redis-server -it --rm -p 6379:6379 redis:7.4.2-bookworm sh -c "redis-server && sleep 7 && redis-cli"

Разное:
- Товары кэшированы. Поэтому при нажатии на +/- количество реально увеличивается, но не отображается на странице товара (данные о количестве подгружаются из кэша).
- Для реализации кэширования списка товаров пришлось создать дополнительный сервис - ItemsService. Метод для получения списка вызывает метод (имеющий кэширование)
получения каждого отдельного товара. Соответственно, если вызывающий и вызываемый методы будут находиться в одном сервисе, кэширование не сработает.
- Сервис платежей запускается на порту 9090 (параллельно с ним нужно запускать основное приложение). Если сервис платежей не запущен, в "Корзине" не будет отображаться кнопка "Купить" и будет выведено сообщение о недоступности сервиса.
- Баланс - СВ в диапазоне [0; 1_000_000). Если на балансе недостаточно средств, то при попытке сделать заказ будет осуществлен переход на страницу с информацией о том, сколько средств не хватает.
- В Swagger OpenApi можно посмотреть по адресам:
  -- Для сервиса платежей: http://localhost:9090/swagger-ui/index.html
