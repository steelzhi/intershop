Привет!
Задание я выполнил, проверьте, пожалуйста.
В schema.sql создано несколько пользователей. Для проверки корректности работы программы проще всего использовать
пользователя с логином "1" и паролем "1" и пользователя с логином "2" и паролем "2" (все данные вводятся без кавычек).
P.S. На текущем этапе разработки к приложению добавлены разные сопутствующие программы. Поэтому ниже я добавил подробную 
инструкцию, как правильно запускать приложение для его корректной работы (особенно это касается части по запуску 
приложения в Docker).

# intershop
Инструкция по работе с приложением.
1. Запуск программы.
Запуск можно осуществить как локально (в IDE), так и в Docker-контейнере:

        1.1. Локальный:
            1.1.1. Запустить Docker. 
            1.1.2. В терминале IDE:
                1.1.2.1. Запустить Redis Server командой:
                docker run --name redis-server -it --rm -p 6379:6379 redis:7.4.2-bookworm sh -c "redis-server && sleep 7 && redis-cli"
                1.1.2.2. Запустить Keycloak командой:
                docker run -d -p 8080:8080 --name keycloak -e KC_BOOTSTRAP_ADMIN_USERNAME=admin -e KC_BOOTSTRAP_ADMIN_PASSWORD=admin quay.io/keycloak/keycloak:26.1.3 start-dev
            После того, как контейнер Keycloak запущен, перейти по адресу localhost:8080 -> ввести логин и пароль 
            (и то, и другое - "admin") -> Clients -> Create client. Создать клиента можно 2 способами: импортировав 
            готового клиента или создав его вручную.
                1.1.2.2.1. Готовый клиент находится в main-app/src/main/resources/main-app.json. Проще всего просто 
                импортировать этого клиента (в файле application.yml основного приложения уже прописан соответствующий 
                "client-secret").
                1.1.2.2.2. В качестве альтернативы п. 1.1.2.1 - создание вручную. Нужно будет задать параметры 
                создаваемого клиента:
                  - Client ID: main-app
                  - Client authentication: On
                  - Authentication flow: отметить Standard flow, Direct access grants, Service account roles
                  - Valid Redirect URIs: http://localhost:8180/*
                Зайти в раздел "Credentials" созданного клиента и скопировать оттуда ключ из "Client secret". Вставить 
                этот ключ в файл application.yml основного приложения (в параметр "client-secret")
            1.1.3. Запустить MainServiceApplication#main (запустится основной сервис на порте 8180).
            1.1.4. Запустить PaymentServiceApplication#main (запустится сервис платежей на порте 9090).
        1.2. В Docker-контейнере:
            1.2.1. Для локального запуска и для запуска в Docker-контейнере применяются разные настройки, поэтому 
            необходимо провести перенастройку в модулях main-app, payment-service:
                1.2.1.1. Модуль main-app:
                    1.2.1.1. Файл application.yml, параметр spring.:
                        1.2.1.1.1. security.oauth2.client.provider.keycloak.issuer-uri: закомментировать значение 
                        "http://localhost:8080/realms/master", раскомментировать значение 
                        "http://keycloak:8080/realms/master".
                        1.2.1.1.2. data.redis.host: закомментировать значение "127.0.0.1", раскомментировать значение 
                        "redis".
                    1.2.1.2. Класс Constants, поле HOST: закомментировать значение "localhost", раскомментировать 
                    значение "payment-service".
                    1.2.1.3. Класс COAuth2ServerConfiguration: закомментировать 
                    "return ReactiveJwtDecoders.fromIssuerLocation("http://localhost:8080/realms/master")", 
                    раскомментировать 
                    "return ReactiveJwtDecoders.fromIssuerLocation("http://keycloak:8080/realms/master");".
                    1.2.1.4. Тестовые классы: тесты выполняются на настройках локального запуска программы, поэтому 
                    бОльшую часть тестов нужно закомментировать. Проще всего просто закомментировать все тестовые классы 
                    (работоспособность всех тестов проверяется при локальном запуске).
                1.2.1.1. Модуль payment-service, файл application.yml, параметр 
                spring.security.oauth2.resourceserver.jwt.issuer-uri: закомментировать значение 
                "http://localhost:8080/realms/master", раскомментировать значение "http://keycloak:8080/realms/master".
            1.2.2. Собрать проект командой "gradle clean build".
            1.2.3. Важный нюанс: client-secret прописывается в application.yml и docker-compose.yml до сборки образов. 
            Но после сборки образа, запуска контейнера keycloak и ручного создания в нем Client ID ("main-app") 
            client-secret будет сгенерирован в keycloak автоматически и не совпадет с client-secret, указанным файлах 
            .yml. А функционала ручного изменения client-secret в keycloak не предусмотрено! Поэтому, чтобы решить эту 
            проблему, нужно:
                1.2.3.1. Либо импортировать уже готовый Client ID (повторив действия из п. 1.1.2.2.1);
                1.2.3.2. Либо создать отдельный контейнер только для Keycloak и добавив в него Client ID (повторив
                действия из п. 1.1.2.2.2). После этого эскпортировать созданный Client ID (на компьютер). Открыть 
                экспортированный файл и скопировать оттуда client-secret файл application.yml основного приложения 
                (в параметр "client-secret") и в файл docker-compose.yml в параметр окружения 
                "SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_MAIN_APP_CLIENT_SECRET".
            1.2.4. Запустить Docker. В терминале IDE выполнить команду "docker compose up".
            В docker-compose.yml прописана зависимость основного сервиса и сервиса платежей от keycloak, но при сборке 
            образов и автоматическом 1-м запуске keycloak все равно может запуститься уже после запуска других 
            приложений. В этом случае основной сервис и сервис платежей упадут с ошибкой. Если такое произойдет, нужно 
            в Docker просто перезапустить контейнер "intershop" - теперь все должно запуститься в правильном порядке.
            1.2.5. Для настройки Keycloak перейти по адресу localhost:8080 -> ввести логин и пароль (и то, и другое - 
            "admin"). Для корректной настройки импортировать созданный в п. 1.2.3 Client ID (никакие настройки не 
            менять, после импорта сразу нажать "Save"). После импорта у нас будет Client ID с предопределенным 
            "client-secret".

2. Перейти в браузере по адресу http://localhost:8180/main/items (адрес интернет-магазина).

Приложение готово к работе. Можно добавлять товары в общей список, а зайдя в аккаунт, - класть их в "Корзину", делать 
заказы и т.п.

Примечания:
- Если пользователь не вошел в личный кабинет, то:
  -- Пользователю будут доступны только главная страница и страница товаров (соответственно, кнопки "Корзина" и "Заказы" 
     пропадут).
  -- На главной странице и странице с товарами в правом верхнем углу появится кнопка "Войти в личный кабинет".
- Если пользователь вошел в личный кабинет, то на всех страницах в правом верхнем углу появляется кнопка "Выйти из 
личного кабинета".
- Добавленные в "Корзину" товары и список совершенных заказов будут уникальными для каждого пользователя.
- Баланс каждого пользователя - случайная величина в диапазоне [0; 1_000_000). Если на балансе недостаточно средств, то 
при попытке сделать заказ будет осуществлен переход на страницу с информацией о том, сколько средств не хватает.
- Сервис платежей запускается на порте 9090 (параллельно с ним нужно запускать основное приложение). Если при локальном 
запуске сервис платежей не запущен, в "Корзине" не будет отображаться кнопка "Купить" и будет выведено сообщение о 
недоступности сервиса.
- Внизу главной страницы есть кнопка для добавления новых товаров.
- Для удобства проверки задания реализована пагинация в формате "2 товара на странице". 
- Для прохождения тестов нужно запустить Redis и Keycloak.